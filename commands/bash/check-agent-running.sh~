#!/bin/bash
#
#
# Check if an anthill agent is running, if not, start it.
# Support hosts running multiple agents on multiple IP addresses.
#
#
BASE_DIR=_CONFIGURE_ME_
PID_FILE=${BASE_DIR}/bin/agent.pid

startAgent(){
        touch ${PID_FILE}
        bash ${BASE_DIR}/bin/ah3agent start ${PID_FILE} > /dev/null 2>&1
}

if [ -f ${PID_FILE} ]; then
        PID=${PID_FILE}
        ps `cat ${PID_FILE}` > /dev/null 2>&1
        if [ $? -eq 0 ]; then
                exit 0
        else
                startAgent
        fi
else
        startAgent
fi
